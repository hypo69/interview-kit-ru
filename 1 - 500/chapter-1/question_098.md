### `question_98.md`

** Вопрос 98.** Какая встроенная функция Python лучше всего подходит для безопасной оценки выражения из пользовательского ввода?

- A.  `eval()`
- B.  `exec()`
- C.  `input()`
- D.  `ast.literal_eval()`

**Правильный ответ: D**

**Объяснение:**

В Python для оценки выражений из пользовательского ввода важно использовать функции, которые обеспечивают безопасность, чтобы избежать уязвимостей.

*   **Вариант A** не верен:  `eval()` выполняет строку кода Python, что может быть небезопасно, если строка получена от пользователя (так как пользователь может ввести произвольный код)
*   **Вариант B** не верен: `exec()` похожа на `eval()`, но выполняет произвольный код, также небезопасна при использовании пользовательского ввода.
*   **Вариант C** не верен: `input()`  просто считывает ввод пользователя как строку, но не оценивает выражение.
*   **Вариант D** верен: `ast.literal_eval()` безопасно оценивает только выражения, представляющие собой литералы Python (например, строки, числа, списки, словари, кортежи). Он не позволяет выполнять произвольный код.

**`eval()` vs. `ast.literal_eval()`:**

*   **`eval()`:**
    *   Выполняет строку как код Python.
    *   Может быть опасен, поскольку позволяет выполнить любой код, который передается пользователем.
*   **`ast.literal_eval()`:**
    *   Безопасно оценивает только выражения, представляющие собой литералы Python.
    *   Ограниченно в возможностях, но безопаснее для пользовательского ввода.

**Пример:**

```python
import ast

# Безопасный способ с помощью ast.literal_eval()
user_input: str = "{'a': 1, 'b': 2}"
try:
    result_safe = ast.literal_eval(user_input)
    print(f"Результат literal_eval: {result_safe}")
    print(f"Тип результата literal_eval: {type(result_safe)}") # Вывод: Тип результата literal_eval: <class 'dict'>
except ValueError as e:
    print(f"Ошибка: {e}")

# Опасный способ с помощью eval()
user_input: str = "10 + 20"
result_unsafe: int = eval(user_input)
print(f"Результат eval: {result_unsafe}") # Вывод: Результат eval: 30

# Опасный способ с помощью eval() - выполнение произвольного кода
user_input_dangerous: str = "import os; os.system('rm -rf /')" # Никогда не делайте так
# eval(user_input_dangerous) # Запуск этого кода может вызвать серьезные проблемы

```

**В результате:**
*   `ast.literal_eval()` безопасно преобразует строку в словарь.
*   `eval()` выполняет строку `"10 + 20"` и выдает результат `30`.
*   Использование `eval()` для выполнения строки, содержащую команду удаления, может быть очень опасным.

Таким образом, **вариант D** является правильным.
