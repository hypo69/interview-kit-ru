### `question_063.md`

**Вопрос 063.** Что такое функциональный паттерн проектирования "Map" (отображение) и как он используется в Python? Приведите пример использования этого паттерна для преобразования элементов коллекции.

-   A. Паттерн "Map" - это способ сортировки элементов в коллекции, используя заданную функцию.
-   B. Паттерн "Map" - это способ фильтрации элементов в коллекции, используя заданное условие.
-   C. Паттерн "Map" - это способ объединения элементов коллекции в одно значение, используя заданную функцию.
-   D. Паттерн "Map" - это способ применения функции к каждому элементу коллекции и создания новой коллекции из полученных результатов.

**Правильный ответ: D**

**Объяснение:**

Паттерн "Map" (отображение) — это распространенный функциональный паттерн, который применяется для преобразования каждого элемента в коллекции (например, список, кортеж) в новый элемент с использованием определенной функции. Результатом является новая коллекция, содержащая преобразованные элементы.

*   **Основные концепции паттерна "Map":**
    *   **Применение функции:** Функция "отображения" применяется к каждому элементу входной коллекции.
    *   **Новая коллекция:** Результаты применения функции сохраняются в новой коллекции.
    *   **Сохранение порядка:** Обычно сохраняется порядок элементов (если это применимо к структуре данных).
    *   **Использование с функциями высшего порядка:** Часто реализуется с помощью функций высшего порядка, таких как `map()` в Python.

*   **Как работает паттерн "Map":**
    1. Принимает входную коллекцию элементов.
    2. Принимает функцию преобразования.
    3. Применяет функцию к каждому элементу коллекции.
    4. Собирает результаты преобразования в новую коллекцию.
    5. Возвращает новую коллекцию с преобразованными значениями.

**Примеры:**

```python
# Пример использования map с обычной функцией
def square(x):
    return x ** 2

numbers = [1, 2, 3, 4, 5]
squared_numbers = list(map(square, numbers))
print(f"Исходный список: {numbers}")
print(f"Список с квадратами: {squared_numbers}")  # Вывод: [1, 4, 9, 16, 25]

# Пример использования map с лямбда функцией
numbers = [1, 2, 3, 4, 5]
cubed_numbers = list(map(lambda x: x ** 3, numbers))
print(f"Исходный список: {numbers}")
print(f"Список с кубами: {cubed_numbers}")  # Вывод: [1, 8, 27, 64, 125]

# Пример использования map с преобразованием строк
strings = ["apple", "banana", "cherry"]
upper_strings = list(map(lambda x: x.upper(), strings))
print(f"Исходный список: {strings}")
print(f"Список строк в верхнем регистре: {upper_strings}")  # Вывод: ['APPLE', 'BANANA', 'CHERRY']

# Пример использования map с несколькими коллекциями
list1 = [1, 2, 3]
list2 = [4, 5, 6]

sums_list = list(map(lambda x, y: x + y, list1, list2))
print(f"Список 1: {list1}")
print(f"Список 2: {list2}")
print(f"Список сумм: {sums_list}") # Вывод: [5, 7, 9]


# Пример использования map с функцией, которая возвращает кортеж
strings = ["apple", "banana", "cherry"]
indexed_strings = list(map(lambda s, i: (i, s), strings, range(len(strings))))
print(f"Исходный список: {strings}")
print(f"Список проиндексированных строк: {indexed_strings}")  # Вывод: [(0, 'apple'), (1, 'banana'), (2, 'cherry')]


# Пример использования map с различными типами данных в списке
mixed_list = [1, "two", 3.0, True]
types = list(map(lambda x: type(x), mixed_list))
print(f"Исходный список: {mixed_list}")
print(f"Список типов: {types}") # Выведет: [<class 'int'>, <class 'str'>, <class 'float'>, <class 'bool'>]
```

**Разбор примеров:**
1.  **Использование с обычной функцией `square`:**
    *   Функция `square(x)` возводит число в квадрат.
    *  Функция `map(square, numbers)` применяет функцию `square` к каждому элементу списка `numbers` и возвращает итератор. Затем итератор преобразовывается в список.
    * Выводит исходный и новый списки.
2.  **Использование с лямбда функцией:**
      * Лямбда-функция `lambda x: x ** 3` вычисляет куб числа.
    *  Функция `map(lambda x: x ** 3, numbers)` применяет лямбду к каждому элементу списка `numbers` и возвращает итератор. Затем итератор преобразовывается в список.
    *  Выводит исходный и новый списки.
3. **Использование `map` с преобразованием строк:**
     *  Лямбда-функция `lambda x: x.upper()` переводит строку в верхний регистр.
     * Функция `map(lambda x: x.upper(), strings)` применяет лямбда-функцию к каждой строке в списке `strings`.
     * Выводит исходный и новый списки.
4.  **Использование `map` с несколькими коллекциями:**
     *  Лямбда-функция `lambda x,y: x+y` суммирует два числа.
     *  Функция `map(lambda x,y: x+y, list1, list2)` применяет лямбда-функцию к каждому элементу в списках `list1` и `list2` (берет элементы с одинаковым индексом).
     *  Выводит исходные списки и список сумм.
5.  **Использование `map` c функцией, которая возвращает кортеж:**
       * Лямбда функция  `lambda s, i: (i, s)` создает пару (индекс, значение) для каждой строки в списке.
       * функция map  создает список кортежей.
     *  Выводит исходный список и список с проиндексированными строками.
6.  **Использование `map` с различными типами данных:**
      *  Лямбда функция  `lambda x: type(x)` возвращает тип объекта.
      *  Функция `map` применяет эту функцию к каждому элементу в списке, что приводит к созданию списка типов.
      *  Выводит исходный список и список типов.

**Разбор вариантов:**
*   **A. Паттерн "Map" - это способ сортировки элементов в коллекции, используя заданную функцию.:** Неправильно. Сортировка - это другая операция.
*  **B. Паттерн "Map" - это способ фильтрации элементов в коллекции, используя заданное условие.:** Неправильно. Фильтрация используется для выборки элементов по условию.
*   **C. Паттерн "Map" - это способ объединения элементов коллекции в одно значение, используя заданную функцию.:** Неправильно. Это описание паттерна Reduce.
*   **D. Паттерн "Map" - это способ применения функции к каждому элементу коллекции и создания новой коллекции из полученных результатов.:** Правильно.

**В результате:**
*  Паттерн "Map" позволяет создавать новый список путем преобразования элементов исходного списка с помощью функции преобразования.
*  Используя функцию `map` и лямбда-функции можно легко реализовать паттерн Map.
* Функция `map` позволяет применять функцию к нескольким спискам одновременно.
* Функция `map` может использоваться с функциями, которые возвращают любое значение (в том числе и кортежи), и может принимать любые типы данных.

Таким образом, правильным ответом является **D. Паттерн "Map" - это способ применения функции к каждому элементу коллекции и создания новой коллекции из полученных результатов.**
