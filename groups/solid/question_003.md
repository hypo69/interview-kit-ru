### `question_003.md` (SRP - Рефакторинг)

**Вопрос 003.** Дан класс `OrderProcessor`, который отвечает за обработку заказов, включая проверку наличия товаров на складе и отправку уведомлений пользователю. Как лучше всего реорганизовать этот класс, чтобы соответствовать принципу единственной ответственности (SRP)?

```python
class OrderProcessor:
    def __init__(self, order_data):
        self.order_data = order_data

    def process_order(self):
        if self._check_stock_availability():
            self._send_confirmation_email()
            return "Order processed successfully"
        else:
            return "Order processing failed: Out of stock"

    def _check_stock_availability(self):
        # Code to check stock availability
        return True  # Simplified for example

    def _send_confirmation_email(self):
        # Code to send confirmation email
        print("Sending confirmation email...")
```

A. Не нужно ничего менять, класс `OrderProcessor` и так соответствует принципу SRP, потому что отвечает за "обработку заказов".

B. Нужно создать отдельные классы: `OrderValidator` для проверки наличия товара и `NotificationService` для отправки уведомлений, а `OrderProcessor` должен координировать их работу.

C. Нужно добавить в класс `OrderProcessor` методы для работы с базой данных, чтобы он мог самостоятельно сохранять информацию о заказе.

D. Нужно удалить методы `_check_stock_availability` и `_send_confirmation_email`, чтобы класс `OrderProcessor` занимался только координированием действий.

**Правильный ответ: B**

**Объяснение:**

В текущем варианте класс `OrderProcessor` имеет как минимум *три* ответственности:

1.  **Управление процессом обработки заказа.**
2.  **Проверка наличия товаров на складе.**
3.  **Отправка уведомлений пользователю.**

Чтобы соответствовать SRP, нужно разделить эти ответственности на отдельные классы.

*   **`OrderValidator`**: Класс, отвечающий за проверку возможности выполнения заказа (например, проверка наличия товаров на складе).
*   **`NotificationService`**: Класс, отвечающий за отправку уведомлений пользователю (например, отправка подтверждения заказа).
*    **`OrderProcessor`**: Класс, отвечающий за управление процессом обработки заказа.

**Почему это улучшение:**

*   Каждый класс теперь имеет только *одну* причину для изменения. Если изменится способ проверки наличия товаров на складе, нужно будет менять только `OrderValidator`, не затрагивая `OrderProcessor` или `NotificationService`.
*   Код становится более модульным, тестируемым и поддерживаемым.

*   **Вариант A не верен:** `OrderProcessor` имеет слишком много обязанностей.
*   **Вариант B верен:** Правильное решение по разделению обязанностей.
*   **Вариант C не верен:** Добавление работы с БД только усугубит нарушение SRP.
*   **Вариант D не верен:** Удаление методов не решает проблему, нужно перенести их в другие классы.

**В результате:**

Для соответствия SRP класс `OrderProcessor` должен быть реорганизован с выделением отдельных классов для проверки наличия товаров на складе и отправки уведомлений, а сам `OrderProcessor` должен координировать их работу.

Таким образом, вариант B является правильным.
