### `question_006.md` (OCP - Применение)

**Вопрос 006.** У вас есть система логирования, которая записывает сообщения в файл. Изначально она поддерживает только текстовый формат. Как *лучше всего* добавить поддержку записи логов в формате JSON, *соблюдая* принцип открытости/закрытости (OCP)?

A. Добавить в существующий класс логирования условную конструкцию (`if/else`) для определения формата и записи в файл в нужном формате.
B. Создать подкласс, который будет переопределять метод записи в файл и добавлять логику для JSON-формата.
C. Создать новый класс, реализующий интерфейс `Logger`, и использовать этот класс для записи логов в формате JSON, не изменяя существующий класс текстового логирования.
D. Использовать декоратор для добавления функциональности JSON-логирования к существующему классу.

**Правильный ответ: C**

**Объяснение:**

Чтобы соблюсти принцип открытости/закрытости (OCP), лучше всего добавить новую функциональность, не изменяя существующий код. В данном случае это означает, что мы не должны модифицировать существующий класс, который записывает логи в текстовом формате.

*   **Вариант А (Неправильно):** Модификация существующего класса с помощью условных операторов нарушает OCP.
*   **Вариант B (Неправильно):** Переопределение методов хоть и является расширением, но все еще изменяет поведение базового класса.
*   **Вариант C (Правильно):** Создание нового класса для JSON логирования, реализующего общий интерфейс, позволяет расширить функциональность системы логирования без изменения существующего кода.
*   **Вариант D (Неправильно):** Использование декоратора может быть вариантом, но в данном случае добавление нового класса с интерфейсом более явно демонстрирует следование OCP.

**Пример:**

```python
from abc import ABC, abstractmethod

class Logger(ABC):
    @abstractmethod
    def log(self, message):
        pass

class TextLogger(Logger):
    def log(self, message):
        with open("log.txt", "a") as f:
            f.write(message + "\n")

class JsonLogger(Logger):
    import json
    def log(self, message):
        with open("log.json", "a") as f:
            json.dump({"message": message}, f)
            f.write("\n")
```
**В результате:**

Создание нового класса для JSON логирования, реализующего общий интерфейс `Logger`, является лучшим способом соблюдения принципа открытости/закрытости (OCP).

Таким образом, вариант C является правильным.
