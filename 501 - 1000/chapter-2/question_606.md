### `question_606.md`

**Вопрос 606.** В чем заключается разница между глубокой (deep copy) и мелкой (shallow copy) копиями объектов в Python, особенно применительно к изменяемым объектам, таким как списки? Приведите примеры, демонстрирующие различия в поведении.

-   A. Мелкая и глубокая копии - это одно и тоже.
-   B. Мелкая копия создает новый объект, но копирует только ссылки на вложенные объекты. Глубокая копия создает полностью независимую копию, включая все вложенные объекты.
-   C. Глубокая копия создает копию, но не сохраняет связи между объектами, а мелкая копия сохраняет эти связи.
-  D. Мелкая копия является не изменяемой, а глубокая изменяемой.

**Правильный ответ: B**

**Объяснение:**

В Python, при работе с изменяемыми объектами, такими как списки, словари, и множества, важно понимать разницу между мелкой (shallow) и глубокой (deep) копиями. Они создают копии объектов по-разному, и это важно при работе со сложными структурами.

*   **Мелкая копия (Shallow copy):**
    *   Создает *новый объект*, но не копирует вложенные объекты. Вместо этого, в новой копии хранятся ссылки на объекты, которые были в исходном.
    *   Изменения во вложенных объектах отразятся в обеих копиях (исходной и новой).
     *  **Использование:** `list.copy()`, `dict.copy()`,  или `list[:]`.

*   **Глубокая копия (Deep copy):**
    *   Создает *полностью независимую копию*, включая все вложенные объекты.
    *   Изменения во вложенных объектах  не повлияют на исходный объект и наоборот.
    *  **Использование:** `copy.deepcopy()` из модуля `copy`.

**Примеры:**

```python
import copy

# Пример 1: мелкая копия списка (shallow copy)
original_list = [1, 2, [3, 4]]
shallow_copy = original_list.copy() # или  shallow_copy = list(original_list) или shallow_copy = original_list[:]
print(f"Исходный список: {original_list}")
print(f"Мелкая копия: {shallow_copy}")

original_list[0] = 100
print(f"Измененный исходный список (только первый элемент): {original_list}")
print(f"Мелкая копия после изменения: {shallow_copy}") # Изменение первого уровня не затронуло мелкую копию
# Выведет:
# Исходный список: [1, 2, [3, 4]]
# Мелкая копия: [1, 2, [3, 4]]
# Измененный исходный список (только первый элемент): [100, 2, [3, 4]]
# Мелкая копия после изменения: [1, 2, [3, 4]]

original_list[2][0] = 5 # изменяем первый элемент вложенного списка
print(f"Измененный исходный список (вложенный список): {original_list}")
print(f"Мелкая копия после изменения вложенного списка: {shallow_copy}") # Изменение вложенного уровня затронуло мелкую копию
# Выведет:
# Измененный исходный список (вложенный список): [100, 2, [5, 4]]
# Мелкая копия после изменения вложенного списка: [1, 2, [5, 4]]


# Пример 2: глубокая копия списка (deep copy)
original_list = [1, 2, [3, 4]]
deep_copy = copy.deepcopy(original_list)
print(f"Исходный список: {original_list}")
print(f"Глубокая копия: {deep_copy}")

original_list[2][0] = 5 # изменяем первый элемент вложенного списка
print(f"Измененный исходный список: {original_list}")
print(f"Глубокая копия после изменения: {deep_copy}") # Глубокая копия не изменяется
# Выведет:
# Исходный список: [100, 2, [5, 4]]
# Глубокая копия: [1, 2, [3, 4]]
# Измененный исходный список: [100, 2, [5, 4]]
# Глубокая копия после изменения: [1, 2, [3, 4]]
```
**Разбор вариантов:**
*   **A. Мелкая и глубокая копии - это одно и тоже.:** Неправильно.
*   **B. Мелкая копия создает новый объект, но копирует только ссылки на вложенные объекты. Глубокая копия создает полностью независимую копию, включая все вложенные объекты.:** Правильно.
*  **C. Глубокая копия создает копию, но не сохраняет связи между объектами, а мелкая копия сохраняет эти связи.:** Неправильно.
*  **D. Мелкая копия является не изменяемой, а глубокая изменяемой.:** Неправильно.

**В результате:**
* Мелкая копия не создает копии вложенных объектов, а только ссылки на них.
*  Глубокая копия создает полностью независимые копии всех объектов, включая вложенные.
* Выбор типа копии зависит от того, нужно ли вам сохранить связи между объектами или создать полностью независимые.

Таким образом, правильным ответом является **B. Мелкая копия создает новый объект, но копирует только ссылки на вложенные объекты. Глубокая копия создает полностью независимую копию, включая все вложенные объекты.**
