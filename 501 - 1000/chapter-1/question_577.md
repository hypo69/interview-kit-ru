### `question_577.md`

**Вопрос 577.** Что такое мемоизация (memoization) в программировании, и как ее можно реализовать в Python? Приведите пример кода, демонстрирующий использование мемоизации для оптимизации рекурсивной функции.

-   A. Мемоизация - это техника, используемая для хранения данных в базе данных.
-   B. Мемоизация - это техника оптимизации, при которой результаты предыдущих вычислений сохраняются и повторно используются, чтобы избежать повторных вычислений одних и тех же значений, особенно в рекурсивных функциях.
-  C. Мемоизация - это техника, при которой данные не изменяются, что позволяет избежать ошибок.
-  D. Мемоизация - это способ шифрования данных перед их сохранением на диск.

**Правильный ответ: B**

**Объяснение:**

Мемоизация (memoization) — это техника оптимизации, которая заключается в сохранении результатов вызовов функций (обычно с определенными аргументами) в некоторой структуре данных, чтобы избежать повторного выполнения этих вычислений при последующих вызовах с теми же аргументами. Она является важным инструментом для повышения производительности, особенно в рекурсивных функциях, где повторяющиеся вычисления могут быть очень затратными.

*   **Основные концепции мемоизации:**
    *   **Кэширование результатов:** Сохранение результатов вызова функции в кэше.
    *   **Переиспользование результатов:** При повторном вызове функции с теми же аргументами, используется сохраненный в кеше результат.
    *   **Ускорение вычислений:** Позволяет избежать повторного вычисления уже вычисленных значений.
    *   **Оптимизация рекурсивных функций:** Позволяет значительно ускорить работу рекурсивных функций, избегая повторяющихся вычислений.

*   **Реализация в Python:**
    *   В Python мемоизацию можно реализовать с помощью декоратора `functools.lru_cache()`.
    *   Декоратор `@functools.lru_cache()` автоматически добавляет кеширование результатов к функции.

**Примеры:**

```python
from functools import lru_cache

# Пример вычисления чисел Фибоначчи с использованием мемоизации
@lru_cache(maxsize=None)
def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n - 1) + fibonacci(n - 2)


print(fibonacci(35))  # 9227465

# Пример без мемоизации
def fibonacci_no_memo(n):
    if n <= 1:
        return n
    return fibonacci_no_memo(n - 1) + fibonacci_no_memo(n - 2)

print(fibonacci_no_memo(30)) # 832040, этот вызов выполняется намного дольше

# Пример использования `lru_cache`  с  maxsize
@lru_cache(maxsize=3)
def sum_cached(x, y):
  print(f"Calculating {x} + {y}")
  return x + y

sum_cached(1,2) # Calculating 1 + 2
sum_cached(1,3) # Calculating 1 + 3
sum_cached(1,4) # Calculating 1 + 4
sum_cached(1,2) # не вычисляется
sum_cached(1,5) # Calculating 1 + 5, при этом  (1,3) выпадает из кеша
sum_cached(1,2) # Вычисляется снова так как  (1,2)  уже нет в кеше

```
**Разбор примеров:**

1.  **`@lru_cache(maxsize=None)`:**  Декоратор, который  реализует мемоизацию для функции `fibonacci(n)`. `maxsize=None` означает что кэш не будет ограничиваться по кол-ву объектов.
    * Функция `fibonacci(n)` вызывается с аргументом `35`.
2.  **`fibonacci_no_memo(n)`:** Пример функции `fibonacci` без использования мемоизации.
3.   **`sum_cached(x, y)`:** Пример с `lru_cache(maxsize=3)` - кэш будет хранить значения до 3х последних вызовов. Если вызывается с новыми значениями, то старые будут удаляться.

**Разбор вариантов:**
*   **A. Мемоизация - это техника, используемая для хранения данных в базе данных.:** Неправильно.
*   **B. Мемоизация - это техника оптимизации, при которой результаты предыдущих вычислений сохраняются и повторно используются, чтобы избежать повторных вычислений одних и тех же значений, особенно в рекурсивных функциях.:** Правильно.
*  **C. Мемоизация - это техника, при которой данные не изменяются, что позволяет избежать ошибок.:** Неправильно, это описание иммутабельности.
*   **D. Мемоизация - это способ шифрования данных перед их сохранением на диск.:** Неправильно.

**В результате:**
*   Мемоизация позволяет существенно ускорить вычисления, особенно в рекурсивных функциях.
*   Декоратор `functools.lru_cache()` предоставляет простой способ добавления мемоизации к функциям Python.
*    `lru_cache` можно настраивать, например, ограничивая кол-во сохраняемых результатов, чтобы не забить память.

Таким образом, правильным ответом является **B. Мемоизация - это техника оптимизации, при которой результаты предыдущих вычислений сохраняются и повторно используются, чтобы избежать повторных вычислений одних и тех же значений, особенно в рекурсивных функциях.**
