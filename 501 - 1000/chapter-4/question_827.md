### `question_827.md`

**Вопрос 827**

Какая из представленных структур кода на Python *наиболее* корректно использует блок `try...except KeyboardInterrupt` для обработки нажатия комбинации клавиш CTRL+C и выполнения определенных действий перед завершением программы?


- A
    ```python
    try:
        while True:
            print("Работаю...")
    except:
        print("Прервано!")
    ```

- B
    ```python
    while True:
        try:
            print("Работаю...")
        except KeyboardInterrupt:
            print("Прервано!")
            break
    ```

- C
    ```python
    try:
        while True:
            print("Работаю...")
    except KeyboardInterrupt:
        pass
    finally:
        print("Прервано!")
    ```

- D
    ```python
    try:
        print("Работаю...")
    except KeyboardInterrupt:
        print("Прервано!")
        break
    ```

**Верный ответ:**

*   **B**

**Объяснение:**

Вариант B - наилучший, так как он позволяет основному циклу продолжаться до тех пор, пока не будет нажата комбинация клавиш CTRL+C.  Исключение `KeyboardInterrupt` возникает при нажатии CTRL+C. Блок `except` обрабатывает это исключение, выводя сообщение "Прервано!", а оператор `break` прерывает бесконечный цикл `while True`. Вариант А отлавливает все исключения, что плохо, так как можно пропустить важные ошибки. Вариант C игнорирует исключение `KeyboardInterrupt`, а `finally` выполнится в любом случае, вне зависимости от того, было ли нажато CTRL+C. Вариант D напечатает "Работаю...", затем сразу выполнится блок `except KeyboardInterrupt` , так как цикл не бесконечный и завершится сразу.

**Пример:**

```python
import time

try:
    while True:
        print("Работаю...")
        time.sleep(1)  # Имитация работы
except KeyboardInterrupt:
    print("\nПрограмма прервана пользователем.")
    print("Выполняю завершающие действия...")
    # Здесь можно поместить код для сохранения данных, закрытия файлов и т.д.
    print("Завершение...")
```

Этот пример будет бесконечно выводить "Работаю...", пока пользователь не нажмет CTRL+C.  После нажатия CTRL+C, выполнение перейдет в блок `except`, где будет выведено сообщение о прерывании и выполнится код завершающих действий.

**Заключение:**

`try...except KeyboardInterrupt` - это простой и эффективный способ обработки нажатия CTRL+C в Python. Ключевым моментом является размещение всего кода, который может быть прерван, в блоке `try`, и размещение кода завершающих действий в блоке `except`. Оператор `break` может быть использован для выхода из цикла после обработки исключения. Такой подход позволяет программе корректно завершить свою работу, а не просто аварийно остановиться.
