### `question_796.md`

**Вопрос 796.** Дан словарь `results`, в котором хранятся данные о затратах и доходе рекламных кампаний по различным источникам. Дополните исходную структуру данных показателем ROI (Return on Investment) по формуле: `(revenue / cost - 1) * 100` (округление до 2 знаков после запятой), и верните  измененный словарь.

**Пример:**

```python
results = {
    'vk': {'revenue': 103, 'cost': 98},
    'yandex': {'revenue': 179, 'cost': 153},
    'ok': {'revenue': 103, 'cost': 110},
    'adwords': {'revenue': 35, 'cost': 34},
    'twitter': {'revenue': 11, 'cost': 24},
}
```
**Вывод:**

```
{'adwords': {'revenue': 35, 'cost': 34, 'ROI': 2.94},
 'ok':      {'revenue': 103, 'cost': 110, 'ROI': -6.36},
 'twitter': {'revenue': 11, 'cost': 24, 'ROI': -54.17},
 'vk':      {'revenue': 103, 'cost': 98, 'ROI': 5.1},
 'yandex':  {'revenue': 179, 'cost': 153, 'ROI': 16.99}}
```

-  A. Для решения задачи нужно создать новый словарь, и в него скопировать все данные и добавить значения ROI.
-  B. Для решения задачи нужно использовать циклы, где для каждого элемента надо вычислить ROI и обновить словарь на месте.
-  C.  Для решения задачи нужно использовать метод `dict.update()` и циклы.
-  D. Для решения задачи нужно использовать цикл  `for`,  распаковывая  `key` и  `value` из словаря, и вычислять  ROI, добавляя его  в текущий словарь.

**Правильный ответ: D**

**Объяснение:**

Для решения задачи добавления показателя ROI в существующий словарь, наиболее эффективным будет использование цикла `for` для обхода словаря и добавления  значение ROI непосредственно в сам словарь, а также  использовать  вложенные словари для хранения дополнительных значений.

*  **Алгоритм:**
    1.   **Итерирование по словарю:**  Перебираем элементы словаря  `results`:
           *    Вычисляем  ROI по формуле `(revenue / cost - 1) * 100`,  и  сохраняем в переменную `roi`.
          *    Добавляем в текущий словарь новое поле  `ROI` со значением `roi`, округленным до двух знаков после запятой.
    2.  **Возврат словаря:** После  прохода по всем элементам словаря  возвращаем его.

*   **Преимущества алгоритма:**
    *   **Простота:**  Использует простые арифметические операции и  базовый цикл `for`.
     *   **Изменяет словарь на месте:**  Редактирует непосредственно исходный словарь, не создавая копию.
   *    **Линейная сложность:** Имеет временную сложность  O(n), где n - количество элементов в словаре.

**Примеры (псевдокод):**
```
function  calculate_roi(results):
 for key,value in results:
     revenue = value["revenue"]
     cost = value["cost"]
        roi =  (revenue / cost - 1) * 100;
        value["ROI"] = round(roi, 2);
   return results
```
**Примеры реализации в Python:**
```python
def calculate_roi(results):
    for key, value in results.items():
        revenue = value["revenue"]
        cost = value["cost"]
        roi = (revenue / cost - 1) * 100
        value["ROI"] = round(roi, 2)
    return results

results = {
    'vk': {'revenue': 103, 'cost': 98},
    'yandex': {'revenue': 179, 'cost': 153},
    'ok': {'revenue': 103, 'cost': 110},
    'adwords': {'revenue': 35, 'cost': 34},
    'twitter': {'revenue': 11, 'cost': 24},
}

print(f"Ввод: results = {results}")
print(f"Вывод: {calculate_roi(results)}")
# Выведет: Вывод: {'vk': {'revenue': 103, 'cost': 98, 'ROI': 5.1}, 'yandex': {'revenue': 179, 'cost': 153, 'ROI': 16.99}, 'ok': {'revenue': 103, 'cost': 110, 'ROI': -6.36}, 'adwords': {'revenue': 35, 'cost': 34, 'ROI': 2.94}, 'twitter': {'revenue': 11, 'cost': 24, 'ROI': -54.17}}
```

**Разбор вариантов:**
*   **A. Для решения задачи нужно создать новый словарь, и в него скопировать все данные и добавить значения ROI.:** Неправильно.
*   **B. Для решения задачи нужно вычесть себестоимость из цены продажи, а затем умножить результат на количество запасов, и затем округлить.:** Неправильно.
*   **C.  Для решения задачи нужно использовать метод `dict.update()` и циклы.:** Неправильно.
*   **D. Для решения задачи нужно использовать цикл `for`,  распаковывая  `key` и `value` из словаря, и вычислять  ROI, добавляя его  в текущий словарь.:** Правильно.

**В результате:**
*  Алгоритм добавляет новый ключ `ROI` с вычисленным значением в каждый элемент словаря.
*  Используется метод `items()`  для перебора ключей и значений словаря.
*   Для получения нужных значений из словаря используются  `data["key"]`.

Таким образом, правильным ответом является **D. Для решения задачи нужно использовать цикл `for`, распаковывая `key` и `value` из словаря, и вычислять ROI, добавляя его в текущий словарь.**
